datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["users"]
}

generator client {
  provider        = "prisma-client-js"
  binaryTargets   = ["native", "debian-openssl-3.0.x"]
  previewFeatures = ["multiSchema"]
}

model User {
  id           String      @id @default(uuid()) @db.Uuid
  email        String      @unique @db.VarChar(255)
  passwordHash String      @map("password_hash") @db.VarChar(255)
  firstName    String      @map("first_name") @db.VarChar(100)
  lastName     String      @map("last_name") @db.VarChar(100)
  phone        String?     @db.VarChar(20)
  role         String      @default("attendee") @db.VarChar(20)
  isActive     Boolean     @default(true) @map("is_active")
  createdAt    DateTime    @default(now()) @map("created_at") @db.Timestamptz()
  updatedAt    DateTime    @updatedAt @map("updated_at") @db.Timestamptz()
  organizer    Organizer?

  @@map("users")
  @@schema("users")
}

model Organizer {
  id          String   @id @default(uuid()) @db.Uuid
  userId      String   @unique @map("user_id") @db.Uuid
  companyName String?  @map("company_name") @db.VarChar(255)
  taxId       String?  @map("tax_id") @db.VarChar(50)
  bankAccount String?  @map("bank_account") @db.VarChar(100)
  verified    Boolean  @default(false)
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz()
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("organizers")
  @@schema("users")
}
